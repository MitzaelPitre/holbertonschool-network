#!/usr/bin/env bash
# Bash script that configures an Ubuntu server with Requirements:
# localhost resolves to 127.0.0.2
# facebook.com resolves to 8.8.8.8

# Create a backup of the hosts file with the current timestamp
cp /etc/hosts ~/"$(date +%s)_hosts.backup"

# Add the new rules to the hosts file, ensuring there are no duplicates
# Check if localhost already resolves to 127.0.0.2
if ! grep -q "127.0.0.2 localhost" /etc/hosts; then
    echo "127.0.0.2 localhost" | sudo tee -a /etc/hosts
fi

# Check if facebook.com already resolves to 8.8.8.8
if ! grep -q "8.8.8.8 facebook.com" /etc/hosts; then
    echo "8.8.8.8 facebook.com" | sudo tee -a /etc/hosts
fi

# Inform the user that the changes have been made
echo "Changes have been applied. localhost now resolves to 127.0.0.2 and facebook.com resolves to 8.8.8.8"
